# playtimes.bin specification

## Magic Word (4 bytes)

32 bits (Little Endian): `0x05505401`

## Entry Count (4 bytes)

32 bits (Little Endian) integer

Must match the count found in [list.bin](./list.md) or odd things happen.

## Game Entries (12 bytes each)

The remainder of the file is taken up with game entries. The number of them present must match the value in the entry
count and the order must match the order of entries in [list.bin](./list.md).

Each entry is defined as follows:

### Cartridge Signature (4 bytes)

32 bits (Little Endian)

The Analogue cartridge signature, generated by taking a CRC32 of the first 512 bytes of the game's ROM. Is not
guaranteed to be unique (see: [known collisions](./collisions.md)). Behaviour if a signature appears twice in this file
is unknown, but I assume that only the first entry's play time will be updated.

### Date Added (4 bytes)

32 bits (Little Endian)

The date the cartridge was added to the library stored as Unix epoch seconds. Unsigned integer, so there's no year 2038
problem. Timezones aren't taken into account, so when modifying this manually the proper offset needs to be applied.

This value may represent a future time without issue.

### Played Time + System (4 bytes)

32 bits (Little Endian)

Playtime in seconds. Despite being 32 bits unsigned, the maximum value storable for a game is `0x03FFFFFF`. This is due
to the first byte being both part of the time & an indicator of the entry's system. To determine the actual playtime,
subtract the following from the total based on the system the entry corresponds to:

* GB: `0x00000000`
* GBC: `0x04000000`
* GBA: `0x08000000`
* GG: `0x0c000000`
* SMS: `0x10000000`
* NGP: `0x14000000`
* NGPC: `0x18000000`
* PCE: `0x1C000000`
* Lynx: `0x20000000`

Setting this initial byte to a value beyond the appropriate system boundary (e.g. setting the first byte on a game 
marked as GB in list.bin to `04` or above) will cause the Pocket to briefly freeze when accessing the library entry, 
after which it will delete it from the library.
